{% load konceptstags %}



	{# today: partial template used in main site and addonthefly snippet  #}




	{# start well #}		
    <div class="well">


	  {% if form.errors %}
        <div class="alert alert-warning">
            <button type="button" class="close" data-dismiss="alert">×</button>
            <strong>Ops something went wrong.</strong> Please correct the errors below.
        </div>
	  {% endif %}
				  
				  		
        <ul class="nav nav-tabs" id="myTabs"> 
		<li class="active"><a href="#tab1" data-toggle="tab" title="Click to focus" class="bluelink"><span class="label label-primary label-force-small">{{SNIPPET_LABEL|upper}} details</span></a></li>
			 
          <li><a href="#tab2" data-toggle="tab" title="Click to focus" class="bluelink"><span class="label label-info label-force-small">From {{DOCUMENT_LABEL|upper}}</span></a></li>
         
        </ul>
		



 	   <div id="myTabContent" class="tab-content">




	{# FIRST TAB  SECTION  #}
	  
		  
	      <div class="tab-pane active in" id="tab1">
			  
			  <form action="" method="post" id="tab" role="form">{% csrf_token %}


				  <br />
				  
				  {# =========== #}
				  {# TITLE  #}
				  {# ===========	 #}

				  

				    {% if form.title.errors %}
				      <div class="alert alert-danger">
				          <button type="button" class="close" data-dismiss="alert">×</button>
				          {{ form.title.errors.as_text|cut:"* " }}
				      </div>
				    {% endif %}
		
					<div class="form-group">	  
				     		<label for="id_title"><b>{{TITLE_LABEL}}</b>:
							&nbsp;<span class="glyphicon glyphicon-info-sign jstooltip icon-xs"  title="The gist, summary or title of the {{SNIPPET_LABEL}}. If blank, it's autogenerated from the first sentence."></span>
							</label>
						<input rows="5" type="text" name="title" id="id_title" class="width-90percent form-control"  autocomplete="off" 
					placeholder="Enter a title..." value="{{form.title.value|default_if_none:""}}" />    
				    </div>
	
				  
				  
				  
				  

				  {# =========== #}
				  {# TEXT #}
				  {# ===========	 #}
				  
				  <hr>
				  
    		      {% if form.text.errors %}
                    <div class="alert alert-danger">
                        <button type="button" class="close" data-dismiss="alert">×</button>
                        {{ form.text.errors.as_text|cut:"* " }}
                    </div>
    		      {% endif %}
				  
				  
				  <div class="form-group">
				    <label for="id_text"><b>Text</b>:
						&nbsp;<span class="glyphicon glyphicon-info-sign jstooltip icon-xs"  title="The content of your {{SNIPPET_LABEL|lower}}."></span>
					</label>
				    <textarea id="id_text" name="text" rows="10" cols="80" class="form-control width-90percent lead" placeholder="Enter your text here...">{{form.text.value|default_if_none:""}}</textarea>
				  </div>

				  

	
	
				  {# =========== #}
				  {# ISPRIVATE #}
				  {# ===========	 #}
 				 
				 <hr>

				     {% if form.isprivate.errors %}
				         <div class="alert alert-danger">
				             <button type="button" class="close" data-dismiss="alert">×</button>
				             {{ form.isprivate.errors.as_text|cut:"* " }}
				         </div>
				     {% endif %}

				  <div class="checkbox">

					<label>
					  <input type="checkbox" name="isprivate" id="id_isprivate"  {% if form.isprivate.value %}checked="checked"{% endif %}>

					Private? {# <span class="glyphicon glyphicon-lock"></span> #}
					</label>

				 </div>

	

			
			
   				  {# =========== #}
   				  {# TAGS #}
   				  {# ===========	 #}	

				  <hr>
				  
   			      {% if form.tags.errors %}
   		              <div class="alert alert-danger">
   		                  <button type="button" class="close" data-dismiss="alert">×</button>
   		                  {{ form.tags.errors.as_text|cut:"* " }}
   		              </div>
   			      {% endif %}


   				   <div class="form-group">
   				        <label for="id_tags">{{SUBJECT_LABEL}}s:
							&nbsp;<span class="glyphicon glyphicon-info-sign jstooltip icon-xs"  title="{{SUBJECT_LABEL}}s are subject keywords used to make searches faster. Add as many as you like."></span>
						</label>
   						<br />
   				        <input id="id_tags" maxlength="300" type="text" name="tags" size="75" class="width-90percent " autocomplete="off" placeholder="Start typying to see suggestions.."
   						value="{{form.tags.value|default_if_none:""}}" />
						
   						{# NOTE: removed the form-control class from tags input so to make it work #}
						
   				   </div>
					
	
					
	
	
	
				  
			{% if 0 %}  {# 2015-02-06: hidden, can become COLLECTIONS in the future #}
				  
				  {# =========== #}
				  {# KONCEPTS #}
				  {# ===========	 #}


			      {% if form.name.errors %}
	                <div class="alert alert-danger">
	                    <button type="button" class="close" data-dismiss="alert">×</button>
	                    {{ form.name.errors.as_text|cut:"* " }}
	                </div>
			      {% endif %}
			  		
					<div class="form-group">	  
			       		<label for="id_name">{{KONCEPT_LABEL}}:</label>
						<input rows="5" type="text" name="name" id="id_name" class="width-90percent form-control"  autocomplete="off" 
					placeholder="Start typing to see suggestions..." value="{{form.name.value|default_if_none:""}}" {% if increaseKoncept  %}readonly{% endif %}/>    			</div>
			

			
					{% if not increaseKoncept  %}
						<span class="text-muted" id="koncept_preview_link">
							{% if editKoncept %}
								Tip: Change this field to attach the current {{SNIPPET_LABEL}} to a different {{KONCEPT_LABEL}}
							{% else %}  {# = new action, without template #}
								{# Tip: Use autocomplete to add the current {{SNIPPET_LABEL}} to an existing {{KONCEPT_LABEL}} #}
							{% endif %}	
						</span>
						{# <br /> #}
					{% endif %}
				
		
			
						<br />
				
				
					{% if not increaseKoncept and recentKoncepts %}
				
						<p><small class="text-muted">Want to reuse a recent {{KONCEPT_LABEL|lower}}? 
							(<span class="glyphicon glyphicon-search"></span>&nbsp;<a href="javascript:$('#recentKoncepts').slideToggle( 'slow', function(){});">show</a>)
						</small></p>

						<div style="width: 80%; display: none;" id="recentKoncepts">
							{% for k in recentKoncepts  %}
								&gt;&nbsp;<a class="konceptcolor" href='javascript:addKoncept("{{k.name}}");' title="Click to reuse">{{k.name}}</a> <br />
						
							{% endfor %}
						</div>


				  {% endif %}


			{% endif %}  {# end of topic section - hidden #}  
								  
		  </div>
		  
	
	
	
	
	
	
		{# SECOND TAB SECTION #}
		
	      <div class="tab-pane fade" id="tab2">
			  	  
  		  {# =========== #}
  		  {# DOCUMENT #}
  		  {# ===========	 #}
		  
					  
  		   {% include "bstrap3.2.0/components/newDocumentForm.html" %}
			  
			  
			 
  			{% if not increaseDocument and not increaseFragment and recentDocuments %}  
			 
  			 <br /><br />
			  
  			<p>
  				<small class="text-muted">Recent {{DOCUMENT_LABEL}}s... 
  									(<span class="glyphicon glyphicon-search"></span>&nbsp;<a href="javascript:$('#recentDocuments').slideToggle( 'slow', function(){});">show</a>)</small>
  			</p>
  			<div style="width: 80%; display: none;" id="recentDocuments">
  			{% for d in recentDocuments  %}
  				&gt;&nbsp;<a class="documentcolor" href='javascript:addDocument("{{d.title}}");' title="Click to reuse">{{d.title}}</a>
  				<br />
  			{% endfor %}	
  			</div>
			
			
  			{% endif %}
				  


			
	      </div>
		  
		  
		  
		  
		  
		  



	  </div>
	  {# end of myTabContent #}


			
	
	</div>
	 {# end  well #}	


	
	
	<div class="form-actions text-right margin-top-50">
		
	  <button type="submit" class="btn btn-success">Save changes</button>
	  
	  
	  {% if addonthefly %}
	  <a href="javascript:setTimeout('self.close();',200)"><button type="button" class="btn btn-default">Cancel</button></a>
  
	  {% else %}
	  	
	  	  {% if cancel_url %}
  		
	  	 	   <a href="{{cancel_url|safe}}">
	  	 		   <button type="button" class="btn btn-default">Cancel</button>
	  	 	   </a>
	   
	  	  {% else %}
  
	   	 	   <a href="{% url person_home request.user %}">
	   	 		   <button type="button" class="btn btn-default">Cancel</button>
	   	 	   </a>
	   
	  	  {% endif %}
	  
	  {% endif %}
	  


	</div>	

	
	</form>
